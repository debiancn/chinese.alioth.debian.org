<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Приложение A. Страница руководства debmake(1)</title>
    <link rel="stylesheet" type="text/css" href="debian.css"/>
    <meta name="generator" content="DocBook XSL Stylesheets V1.79.1"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link rel="home" href="index.ru.html" title="Руководство для сопровождающих Debian"/>
    <link rel="up" href="index.ru.html" title="Руководство для сопровождающих Debian"/>
    <link rel="prev" href="ch08.ru.html" title="Глава 8. Дополнительные примеры"/>
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Приложение A. Страница руководства <span class="strong"><strong>debmake</strong></span>(1)</th>
        </tr>
        <tr>
          <td align="left"><a accesskey="p" href="ch08.ru.html"><img src="images/prev.png" alt="Пред."/></a> </td>
          <th width="60%" align="center"> </th>
          <td align="right"> </td>
        </tr>
      </table>
      <hr/>
    </div>
    <div class="appendix">
      <div class="titlepage">
        <div>
          <div>
            <h1 class="title"><a id="manpage"/>Приложение A. Страница руководства <span class="strong"><strong>debmake</strong></span>(1)</h1>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_name"/>A.1. НАЗВАНИЕ</h2>
            </div>
          </div>
        </div>
        <p>debmake - program to make a Debian source package</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_synopsis"/>A.2. СИНТАКСИС</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> [<span class="strong"><strong>-h</strong></span>] [<span class="strong"><strong>-c</strong></span> | <span class="strong"><strong>-k</strong></span>] [<span class="strong"><strong>-n</strong></span> | <span class="strong"><strong>-a</strong></span> <span class="emphasis"><em>пакет-версия</em></span><span class="strong"><strong>.orig.tar.gz</strong></span> | <span class="strong"><strong>-d</strong></span> | <span class="strong"><strong>-t</strong></span> ] [<span class="strong"><strong>-p</strong></span> <span class="emphasis"><em>пакет</em></span>] [<span class="strong"><strong>-u</strong></span> <span class="emphasis"><em>версия</em></span>] [<span class="strong"><strong>-r</strong></span> <span class="emphasis"><em>редакция</em></span>] [<span class="strong"><strong>-z</strong></span> <span class="emphasis"><em>расширение</em></span>] [<span class="strong"><strong>-b</strong></span> "<span class="emphasis"><em>двоичныйпакет</em></span><span class="emphasis"><em><span class=":__type__">, …</span></em></span>]" [<span class="strong"><strong>-e</strong></span> <span class="emphasis"><em>foo@example.org</em></span>] [<span class="strong"><strong>-f</strong></span> "<span class="emphasis"><em>имя фамилия</em></span>"] [<span class="strong"><strong>-i</strong></span> "<span class="emphasis"><em>инструментсборки</em></span>" | <span class="strong"><strong>-j</strong></span>] [<span class="strong"><strong>-l</strong></span> <span class="emphasis"><em>файл_лицензии</em></span>] [<span class="strong"><strong>-m</strong></span>] [<span class="strong"><strong>-o</strong></span> <span class="emphasis"><em>файл</em></span>] [<span class="strong"><strong>-q</strong></span>] [<span class="strong"><strong>-s</strong></span>] [<span class="strong"><strong>-v</strong></span>] [<span class="strong"><strong>-w</strong></span> "<span class="emphasis"><em>дополнение, …</em></span>"] [<span class="strong"><strong>-x</strong></span> [01234]] [<span class="strong"><strong>-y</strong></span>] [<span class="strong"><strong>-L</strong></span>] [<span class="strong"><strong>-P</strong></span>] [<span class="strong"><strong>-T</strong></span>]</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_description"/>A.3. ОПИСАНИЕ</h2>
            </div>
          </div>
        </div>
        <p><span class="strong"><strong>debmake</strong></span> помогает собрать пакет Debian из исходного кода основной ветки разработки. Обычно это делается следующим образом:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">Загружается tar-архив основной ветки разработки в виде файла <span class="emphasis"><em>пакет-версия</em></span><span class="strong"><strong>.tar.gz</strong></span>.</li>
            <li class="listitem">Исходный код распаковывается, создаются файлы в каталоге <span class="emphasis"><em>пакет-версия/</em></span>.</li>
            <li class="listitem">Вызывается debmake в каталоге <span class="emphasis"><em>пакет-версия/</em></span>, возможно, без аргументов.</li>
            <li class="listitem">Файлы в каталоге <span class="emphasis"><em>package-version</em></span><span class="strong"><strong>/debian/</strong></span> настраиваются вручную.</li>
            <li class="listitem">Вызывается <span class="strong"><strong>dpkg-buildpackage</strong></span> (обычно из обёрточной утилиты <span class="strong"><strong>debuild</strong></span> или <span class="strong"><strong>pdebuild</strong></span>) в каталоге <span class="emphasis"><em>пакет-версия/</em></span> с целью создания пакетов Debian.</li>
          </ul>
        </div>
        <p>Обязательно защитите путём соответствующего включения в кавычки аргументы опций <span class="strong"><strong>-b</strong></span>, <span class="strong"><strong>-f</strong></span>, <span class="strong"><strong>-l</strong></span> и <span class="strong"><strong>-w</strong></span> от вмешательства командной оболочки.</p>
        <div class="section">
          <div class="titlepage">
            <div>
              <div>
                <h3 class="title"><a id="_optional_arguments"/>A.3.1. необязательные аргументы:</h3>
              </div>
            </div>
          </div>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term"><span class="strong"><strong>-h</strong></span>, <span class="strong"><strong>--help</strong></span></span>
              </dt>
              <dd>показать справочное сообщение и выйти.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-c</strong></span>, <span class="strong"><strong>--copyright</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">сканировать исходный код на предмет текста об авторском праве и лицензировании и выйти.</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>-c</strong></span>: простой стиль вывода</li>
                    <li class="listitem"><span class="strong"><strong>-cc</strong></span>: обычный стиль вывода (схож с файлом <span class="strong"><strong>debian/copyright</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>-ccc</strong></span>: отладочный стиль вывода</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-k</strong></span>, <span class="strong"><strong>--kludge</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">сравнить файл <span class="strong"><strong>debian/copyright</strong></span> с исходным кодом и выйти.</p>
                <p class="simpara">Файл <span class="strong"><strong>debian/copyright</strong></span> должен быть организован таким образом, что наиболее общие файловые шаблоны размещаются раньше конкретных исключений.</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>-k</strong></span>: простой стиль вывода</li>
                    <li class="listitem"><span class="strong"><strong>-kk</strong></span>: подробный стиль вывода</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-n</strong></span>, <span class="strong"><strong>--native</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">
make a native Debian source package without <span class="strong"><strong>.orig.tar.gz</strong></span>.  This makes a “<span class="strong"><strong>3.0 (native)</strong></span>” format package.
</p>
                <p class="simpara">If you are thinking of packaging a Debian-specific source tree with <span class="strong"><strong>debian/</strong></span>* in it into a native Debian package, please think otherwise.  You can use  the “<span class="strong"><strong>debmake -d  -i debuild</strong></span>” or “<span class="strong"><strong>debmake -t -i debuild</strong></span>” commands to make a “<span class="strong"><strong>3.0 (quilt)</strong></span>” format non-native Debian package.  The only difference is that the <span class="strong"><strong>debian/changelog</strong></span> file must use the  non-native version scheme: <span class="emphasis"><em>version-revision</em></span>.  The non-native package is more friendly to downstream distributions.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-a</strong></span> <span class="emphasis"><em>пакет-версия</em></span><span class="strong"><strong>.tar.gz</strong></span>, <span class="strong"><strong>--archive</strong></span> <span class="emphasis"><em>пакет-версия</em></span><span class="strong"><strong>.tar.gz</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">использовать непосредственно tar-архив с исходным кодом основной ветки. (отменяются опции <span class="strong"><strong>-p</strong></span>, <span class="strong"><strong>-u</strong></span>, <span class="strong"><strong>-z</strong></span>)</p>
                <p class="simpara">The upstream tarball may be specified as <span class="emphasis"><em>package_version</em></span><span class="strong"><strong>.orig.tar.gz</strong></span> and <span class="strong"><strong>tar.gz</strong></span>.  For other cases, it may be <span class="strong"><strong>tar.bz2</strong></span>, or <span class="strong"><strong>tar.xz</strong></span>.</p>
                <p class="simpara">Если в имени указанного tar-архива основной ветки содержатся буквы в верхнем регистре, то в имени пакета Debian они будут преобразованы в буквы нижнего регистра.</p>
                <p class="simpara">Если в качестве аргумента указан URL (http://, https:// или ftp://) tar-архива основной ветки, то этот архив скачивается с помощью <span class="strong"><strong>wget</strong></span> или <span class="strong"><strong>curl</strong></span>.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-d</strong></span>, <span class="strong"><strong>--dist</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">сначала запустить эквиваленты команды «make dist» для создания tar-архива основной ветки, затем использовать его.</p>
                <p class="simpara">Команда «<span class="strong"><strong>debmake -d</strong></span>» предназначена для запуска в каталоге <span class="emphasis"><em>пакет/</em></span>, в котором расположена система управления версиями и система сборки, поддерживающая эквиваленты команды «<span class="strong"><strong>make dist</strong></span>». (automake/autoconf, Python distutils, …)</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-t</strong></span>, <span class="strong"><strong>--tar</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">запустить команду «<span class="strong"><strong>tar</strong></span>» для создания tar-архива основной ветки, затем использовать его.</p>
                <p class="simpara">The “<span class="strong"><strong>debmake -t</strong></span>” command is designed to run in the <span class="emphasis"><em>package/</em></span> directory hosting the upstream VCS.  Unless you provide the upstream version with the <span class="strong"><strong>-u</strong></span> option or with the <span class="strong"><strong>debian/changelog</strong></span> file, a snapshot upstream version is generated in the <span class="strong"><strong>0~%y%m%d%H%M</strong></span> format, e.g., <span class="emphasis"><em>0~1403012359</em></span>, from the UTC date and time.  The generated tarball excludes the <span class="strong"><strong>debian/</strong></span> directory found in the upstream VCS. (It also excludes typical VCS directories: <span class="strong"><strong>.git/ .hg/ .svn/ .CVS/</strong></span>.)</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-p</strong></span> <span class="emphasis"><em>пакет</em></span>, <span class="strong"><strong>--package</strong></span> <span class="emphasis"><em>пакет</em></span></span>
              </dt>
              <dd>установить имя пакета Debian.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-u</strong></span> <span class="emphasis"><em>версия</em></span>, <span class="strong"><strong>--upstreamversion</strong></span> <span class="emphasis"><em>версия</em></span></span>
              </dt>
              <dd>установить версию пакета основной ветки.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-r</strong></span> <span class="emphasis"><em>редакция</em></span>, <span class="strong"><strong>--revision</strong></span> <span class="emphasis"><em>редакция</em></span></span>
              </dt>
              <dd>установить номер редации пакета Debian.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-z</strong></span> <span class="emphasis"><em>расширение</em></span>, <span class="strong"><strong>--targz</strong></span> <span class="emphasis"><em>расширение</em></span></span>
              </dt>
              <dd>
set the tarball type, <span class="emphasis"><em>extension</em></span>=(<span class="strong"><strong>tar.gz</strong></span>|<span class="strong"><strong>tar.bz2</strong></span>|<span class="strong"><strong>tar.xz</strong></span>). (alias: <span class="strong"><strong>z</strong></span>, <span class="strong"><strong>b</strong></span>, <span class="strong"><strong>x</strong></span>)
</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-b</strong></span> "<span class="emphasis"><em>двоичныйпакет[:тип],…</em></span>", <span class="strong"><strong>--binaryspec</strong></span> "<span class="emphasis"><em>двоичныйпакет[:тип],…</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">
set the binary package specs by a comma separated list of <span class="emphasis"><em>binarypackage:type</em></span> pairs, e.g., in the full form “<span class="strong"><strong>foo:bin,foo-doc:doc,libfoo1:lib,libfoo-dev:dev</strong></span>” or in the short form, “<span class="strong"><strong>-doc,libfoo1,libfoo-dev</strong></span>”.
</p>
                <p class="simpara">Here, <span class="emphasis"><em>binarypackage</em></span> is the binary package name, and the optional <span class="emphasis"><em>type</em></span> is chosen from the following <span class="emphasis"><em>type</em></span> values:</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="strong"><strong>bin</strong></span>: скомпилированный двоичный пакет с исполняемыми файлами формата ELF на языке C/C++ (any, foreign) (по умолчанию, псевдоним: <span class="strong"><strong>""</strong></span>, то есть <span class="emphasis"><em>пустая-строка</em></span>)</li>
                    <li class="listitem"><span class="strong"><strong>data</strong></span>: пакет с данными (шрифты, графика, …) (all, foreign) (псевдоним: <span class="strong"><strong>da</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>dev</strong></span>: пакет с библиотекой разработки (any, same) (псевдоним: <span class="strong"><strong>de</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>doc</strong></span>: пакет документации (all, foreign) (псевдоним: <span class="strong"><strong>do</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>lib</strong></span>: пакет с библиотекой (any, same) (псевдоним: <span class="strong"><strong>l</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>perl</strong></span>: пакет со сценарием на языке Perl (all, foreign) (псевдоним: <span class="strong"><strong>pl</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>python</strong></span>: пакет со сценарием на языке Python (all, foreign) (псевдоним: <span class="strong"><strong>py</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>python3</strong></span>: пакет со сценарием на языке Python3 (all, foreign) (псевдоним: <span class="strong"><strong>py3</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>ruby</strong></span>: пакет со сценарием на языке Ruby (all, foreign) (псевдоним: <span class="strong"><strong>rb</strong></span>)</li>
                    <li class="listitem"><span class="strong"><strong>script</strong></span>: пакет со сценарием командной оболочки (all, foreign) (псевдоним: <span class="strong"><strong>sh</strong></span>)</li>
                  </ul>
                </div>
                <p class="simpara">Пары значений в скобках, такие как (any, foreign), представляют собой значения служебных строк <span class="strong"><strong>Architecture</strong></span> и <span class="strong"><strong>Multi-Arch</strong></span>, устанавливаемые в файле <span class="strong"><strong>debian/control</strong></span>.</p>
                <p class="simpara">Во многих случаях команда <span class="strong"><strong>debmake</strong></span> довольно хорошо предсказывает значение поля <span class="emphasis"><em>тип</em></span>, исходя из значения поля <span class="emphasis"><em>двоичныйпакет</em></span>. Если <span class="emphasis"><em>тип</em></span> не очевиден, то значением поля <span class="emphasis"><em>тип</em></span> становится <span class="strong"><strong>bin</strong></span>. Например, исходя из <span class="strong"><strong>libfoo</strong></span> значением поля <span class="emphasis"><em>тип</em></span> становится <span class="strong"><strong>lib</strong></span>, а исходя из <span class="strong"><strong>font-bar</strong></span> значением поля <span class="emphasis"><em>тип</em></span> становится <span class="strong"><strong>data</strong></span>, …</p>
                <p class="simpara">Если содержимое дерева исходного кода не совпадает с настройками поля <span class="emphasis"><em>тип</em></span>, то команда <span class="strong"><strong>debmake</strong></span> выводит предупреждение.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-e</strong></span> <span class="emphasis"><em>foo@example.org</em></span>, <span class="strong"><strong>--email</strong></span> <span class="emphasis"><em>foo@example.org</em></span></span>
              </dt>
              <dd>
                <p class="simpara">установить адрес электронной почты.</p>
                <p class="simpara">По умолчанию берётся значение переменной окружения <span class="strong"><strong>$DEBEMAIL</strong></span>.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-f</strong></span> "<span class="emphasis"><em>имя фамилия</em></span>", <span class="strong"><strong>--fullname</strong></span> "<span class="emphasis"><em>имя фамилия</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">установить имя и фамилию.</p>
                <p class="simpara">По умолчанию берётся значение переменной окружения <span class="strong"><strong>$DEBFULLNAME</strong></span>.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-i</strong></span> "<span class="emphasis"><em>инструментсборки</em></span>", <span class="strong"><strong>--invoke</strong></span> "<span class="emphasis"><em>инструментсборки</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">
invoke "<span class="emphasis"><em>buildtool</em></span>" at the end of execution.  <span class="emphasis"><em>buildtool</em></span> may be “<span class="strong"><strong>dpkg-buildpackage</strong></span>”, “<span class="strong"><strong>debuild</strong></span>”, “<span class="strong"><strong>pdebuild</strong></span>”, “<span class="strong"><strong>pdebuild  --pbuilder cowbuilder</strong></span>”, etc.
</p>
                <p class="simpara">По умолчанию никакая программа не выполняется.</p>
                <p class="simpara">Передача этой опции автоматически приводит к передаче опции <span class="strong"><strong>--local</strong></span>.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-j</strong></span>, <span class="strong"><strong>--judge</strong></span></span>
              </dt>
              <dd>
                <p class="simpara">запустить <span class="strong"><strong>dpkg-depcheck</strong></span> для выявления сборочных зависимостей и определения путей файлов. Файлы журнала располагаются в родительском каталоге.</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem"><span class="emphasis"><em>package</em></span><span class="strong"><strong>.build-dep.log</strong></span>: файл журнала <span class="strong"><strong>dpkg-depcheck</strong></span>.</li>
                    <li class="listitem"><span class="emphasis"><em>package</em></span><span class="strong"><strong>.install.log</strong></span>: файл журнала, в который записываются файлы из каталога <span class="strong"><strong>debian/tmp</strong></span>.</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-l</strong></span> "<span class="emphasis"><em>файл_лицензии,…</em></span>", <span class="strong"><strong>--license</strong></span> "<span class="emphasis"><em>файл_лицензии,…</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">
add formatted license text to the end of the <span class="strong"><strong>debian/copyright</strong></span> file holding license scan results.
</p>
                <p class="simpara">The default is to add <span class="strong"><strong>COPYING</strong></span> and <span class="strong"><strong>LICENSE</strong></span>, and <span class="emphasis"><em>license_file</em></span> needs to list only the additional file names all separated by “<span class="strong"><strong>,</strong></span>”.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-m</strong></span>, <span class="strong"><strong>--monoarch</strong></span></span>
              </dt>
              <dd>подготовить пакеты без поддержки мультиархитектурности.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-o</strong></span> <span class="emphasis"><em>файл</em></span>, <span class="strong"><strong>--option</strong></span> <span class="emphasis"><em>файл</em></span></span>
              </dt>
              <dd>
                <p class="simpara">
read optional parameters from <span class="emphasis"><em>file</em></span>. (This is not for everyday use.)
</p>
                <p class="simpara">The content of <span class="emphasis"><em>file</em></span> is sourced as the Python3 code at the end of <span class="strong"><strong>para.py</strong></span>.  For example, the package description can be specified by the following file.</p>
                <pre class="screen">para['desc'] = 'program short description'
para['desc_long'] = '''\
 program long description which you wish to include.
 .
 Empty line is space + .
 You keep going on ...
'''</pre>
              </dd>
            </dl>
          </div>
          <div class="variablelist">
            <dl class="variablelist">
              <dt>
                <span class="term"><span class="strong"><strong>-q</strong></span>, <span class="strong"><strong>--quitearly</strong></span></span>
              </dt>
              <dd>выйти до создания файлов в каталоге <span class="strong"><strong>debian/</strong></span>.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-s</strong></span>, <span class="strong"><strong>--spec</strong></span></span>
              </dt>
              <dd>использовать spec-файло основной ветки (в случае исходного кода на языке Python используется setup.py и т. д.) в качестве источника описания пакета.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-v</strong></span>, <span class="strong"><strong>--version</strong></span></span>
              </dt>
              <dd>показать информацию о версии.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-w</strong></span> "<span class="emphasis"><em>дополнение,…</em></span>", <span class="strong"><strong>--with</strong></span> "<span class="emphasis"><em>дополнение,…</em></span>"</span>
              </dt>
              <dd>
                <p class="simpara">добавить дополнительные аргументы опции <span class="strong"><strong>--with</strong></span> команды <span class="strong"><strong>dh</strong></span>(1) в качестве <span class="emphasis"><em>дополнений</em></span> в файл <span class="strong"><strong>debian/rules</strong></span>.</p>
                <p class="simpara">Значения <span class="emphasis"><em>дополнений</em></span> указываются с разделением с помощью «<span class="strong"><strong>,</strong></span>», напр., «<span class="strong"><strong>-w "python2,autoreconf"»</strong></span>.</p>
                <p class="simpara">For  Autotools based packages, setting <span class="strong"><strong>autoreconf</strong></span> as <span class="emphasis"><em>addon</em></span> forces running “<span class="strong"><strong>autoreconf -i -v -f</strong></span>” for every package building.  Otherwise, <span class="strong"><strong>autotools-dev</strong></span> as <span class="emphasis"><em>addon</em></span> is used as the default.</p>
                <p class="simpara">For Autotools based packages, if they install Python programs, <span class="strong"><strong>python2</strong></span> as <span class="emphasis"><em>addon</em></span> is needed for packages with “<span class="strong"><strong>compat &lt; 9</strong></span>” since this is non-obvious.   But for <span class="strong"><strong>setup.py</strong></span> based packages, <span class="strong"><strong>python2</strong></span> as <span class="emphasis"><em>addon</em></span> is not needed since this is obvious and it is automatically set for the <span class="strong"><strong>dh</strong></span>(1) command by the <span class="strong"><strong>debmake</strong></span> command when it is required.</p>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-x</strong></span> <span class="emphasis"><em>n</em></span>, <span class="strong"><strong>--extra</strong></span> <span class="emphasis"><em>n</em></span></span>
              </dt>
              <dd>
                <p class="simpara">
generate configuration files as templates.  (Please note <span class="strong"><strong>debian/changelog</strong></span>, <span class="strong"><strong>debian/control</strong></span>, <span class="strong"><strong>debian/copyright</strong></span>, and <span class="strong"><strong>debian/rules</strong></span> are bare minimum configuration files to build a Debian binary package.)
</p>
                <p class="simpara">The number <span class="emphasis"><em>n</em></span> determines which configuration templates are generated.</p>
                <div class="itemizedlist">
                  <ul class="itemizedlist">
                    <li class="listitem">
<span class="strong"><strong>-x0</strong></span>: bare minimum configuration files. (default option if any of bare minimum configuration files already exist)
</li>
                    <li class="listitem">
<span class="strong"><strong>-x1</strong></span>: all <span class="strong"><strong>-x0</strong></span> files + desirable configuration files for the single binary package. (default option for the single binary package if none of bare minimum configuration files exist)
</li>
                    <li class="listitem">
<span class="strong"><strong>-x2</strong></span>: all <span class="strong"><strong>-x1</strong></span> files + desirable configuration files for the multi binary package. (default option for the multi binary package if none of bare minimum configuration files exist)
</li>
                    <li class="listitem">
<span class="strong"><strong>-x3</strong></span>: all <span class="strong"><strong>-x2</strong></span> files + unusual configuration template files. Unsual configuration template files are generated with the extra <span class="strong"><strong>.ex</strong></span> suffix to ease their removal. To use these as configuration files, rename their file names to ones without the <span class="strong"><strong>.ex</strong></span> suffix.
</li>
                    <li class="listitem">
<span class="strong"><strong>-x4</strong></span>: all <span class="strong"><strong>-x3</strong></span> files + copyright file examples.
</li>
                  </ul>
                </div>
              </dd>
              <dt>
                <span class="term"><span class="strong"><strong>-y</strong></span>, <span class="strong"><strong>--yes</strong></span></span>
              </dt>
              <dd>«отвечать утвердительно» на все вопросы. (без опции: «спрашивать [Y/n]»; двочная опция: «отвечать отрицательно»)</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-L</strong></span>, <span class="strong"><strong>--local</strong></span></span>
              </dt>
              <dd>создать файлы настройки для локального пакета, чтобы перехитрить проверки <span class="strong"><strong>lintian</strong></span>(1).</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-P</strong></span>, <span class="strong"><strong>--pedantic</strong></span></span>
              </dt>
              <dd>педантично проверять автоматически создаваемые файлы.</dd>
              <dt>
                <span class="term"><span class="strong"><strong>-T</strong></span>, <span class="strong"><strong>--tutorial</strong></span></span>
              </dt>
              <dd>вывести в шаблонных файлах строки с обучающими комментариями.</dd>
            </dl>
          </div>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_examples"/>A.4. ПРИМЕРЫ</h2>
            </div>
          </div>
        </div>
        <p>For a well behaving source, you can build a good-for-local-use installable single Debian binary package easily with one command.  Test install of such a package generated in this way offers a good alternative to the traditional “<span class="strong"><strong>make install</strong></span>” command installing into the <span class="strong"><strong>/usr/local</strong></span> directory since the Debian package can be  removed  cleanly  by  the “<span class="strong"><strong>dpkg -P</strong></span> <span class="emphasis"><em>…”</em></span> command. Here are some examples of how to build such test packages. (These should work in most cases.  If the <span class="strong"><strong>-d</strong></span> option does not work, try the <span class="strong"><strong>-t</strong></span> option instead.)</p>
        <p>Для дерева исходного кода обычной программы на языке C с autoconf/automake:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -d -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
        <p>For a typical Python module source tree:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -s -d -b":python" -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
        <p>Для обычного модуля языка Python в виде архива <span class="emphasis"><em>пакет-версия</em></span><span class="strong"><strong>.tar.gz</strong></span>:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -s -a <span class="emphasis"><em>пакет-версия</em></span>.tar.gz -b":python" -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
        <p>Для обычного модуля языка Perl в виде архива <span class="emphasis"><em>пакет-версия</em></span><span class="strong"><strong>.tar.gz</strong></span>:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
              <span class="strong">
                <strong>debmake -a <span class="emphasis"><em>пакет-версия</em></span>.tar.gz -b":perl" -i debuild</strong>
              </span>
            </li>
          </ul>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_helper_packages"/>A.5. ВСПОМОГАТЕЛЬНЫЕ ПАКЕТЫ</h2>
            </div>
          </div>
        </div>
        <p>Для работы над пакетами может потребоваться установка некоторых дополнительных специализированных вспомогательных пакетов.</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">
Python3 programs may require the <span class="strong"><strong>dh-python</strong></span> package.
</li>
            <li class="listitem">
The Autotools (Autoconf + Automake) build system may require <span class="strong"><strong>autotools-dev</strong></span> or <span class="strong"><strong>dh-autoreconf</strong></span> package.
</li>
            <li class="listitem">
Ruby programs may require the <span class="strong"><strong>gem2deb</strong></span> package.
</li>
            <li class="listitem">
Java programs may require the <span class="strong"><strong>javahelper</strong></span> package.
</li>
            <li class="listitem">Для программ для окружения Gnome может потребоваться пакет <span class="strong"><strong>gobject-introspection</strong></span>.</li>
            <li class="listitem">и т. д.</li>
          </ul>
        </div>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_caveat"/>A.6. ПРЕДОСТЕРЕЖЕНИЯ</h2>
            </div>
          </div>
        </div>
        <p>Утилита <span class="strong"><strong>debmake</strong></span> предназначена для создания шаблонных файлов в помощью сопровождающему пакета. Строчки с комментариями начинаются с символа <span class="strong"><strong>#</strong></span> и содержат обучающий текст. Вам следует удалить или отредактировать строки с комментариями до выполнения загрузки пакета в архив Debian.</p>
        <p>The license extraction and assignment process involves a lot of heuristics; it may fail in some cases.  It is highly recommended to use other tools such as <span class="strong"><strong>licensecheck</strong></span> from the <span class="strong"><strong>devscripts</strong></span> package in conjunction with <span class="strong"><strong>debmake</strong></span>.</p>
        <p>There  are some limitations for what characters may be used as a part of the Debian package.  The most notable limitation is the prohibition of uppercase letters in the package name.  Here is a summary as a set of regular expressions:</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem">Имя пакета основной ветки разработки (<span class="strong"><strong>-p</strong></span>): [-+.a-z0-9]{2,}</li>
            <li class="listitem">Имя двоичного пакета (<span class="strong"><strong>-b</strong></span>): [-+.a-z0-9]{2,}</li>
            <li class="listitem">Версия основной ветки разработки (<span class="strong"><strong>-u</strong></span>): [0-9][-+.:~a-z0-9A-Z]*</li>
            <li class="listitem">Редакция Debian (<span class="strong"><strong>-r</strong></span>): [0-9][+.~a-z0-9A-Z]*</li>
          </ul>
        </div>
        <p>See the exact definition in <a class="ulink" href="https://www.debian.org/doc/debian-policy/#document-ch-controlfields">Chapter 5 - Control files and their fields</a> in the “Debian Policy Manual”.</p>
        <p><span class="strong"><strong>debmake</strong></span> предполагает относительно простые случаи создания пакетов. Поэтому все программы, относящиеся е интерпретатору, считаются «<span class="strong"><strong>Architecture: all</strong></span>». Тем не менее, это не всегда так.</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_debug"/>A.7. ОТЛАДКА</h2>
            </div>
          </div>
        </div>
        <p>Сообщения об ошибках отправляйте с помощью команды <span class="strong"><strong>reportbug</strong></span> для пакета <span class="strong"><strong>debmake</strong></span>.</p>
        <p>Набор символов в переменной окружении <span class="strong"><strong>$DEBUG</strong></span> определяет уровень вывода журнала.</p>
        <div class="itemizedlist">
          <ul class="itemizedlist">
            <li class="listitem"><span class="strong"><strong>i</strong></span>: печать информации</li>
            <li class="listitem"><span class="strong"><strong>p</strong></span>: вывод всех глобальных параметров</li>
            <li class="listitem"><span class="strong"><strong>d</strong></span>: вывод всех грамматически разобранных параметров для всех двоичных пакетов</li>
            <li class="listitem"><span class="strong"><strong>f</strong></span>: ввод имени файла для сканирования copyright</li>
            <li class="listitem"><span class="strong"><strong>y</strong></span>: разделение год/имя для строки об авторском праве</li>
            <li class="listitem"><span class="strong"><strong>s</strong></span>: сканер строки для format_state</li>
            <li class="listitem"><span class="strong"><strong>b</strong></span>: цикл сканирования content_state: начало-конец</li>
            <li class="listitem"><span class="strong"><strong>m</strong></span>: цикл сканирования content_state: после совпадения с регулярным выражением</li>
            <li class="listitem"><span class="strong"><strong>e</strong></span>: цикл сканирования content_state: конец-цикл</li>
            <li class="listitem"><span class="strong"><strong>c</strong></span>: печать текста из раздела об авторских правах</li>
            <li class="listitem"><span class="strong"><strong>l</strong></span>: печать текста из раздела о лицензиях</li>
            <li class="listitem"><span class="strong"><strong>a</strong></span>: печать текста из раздела автор/переводчик</li>
            <li class="listitem"><span class="strong"><strong>k</strong></span>: сортировать ключи для строк debian/copyright</li>
            <li class="listitem"><span class="strong"><strong>n</strong></span>: сканировать результат debian/copyright («<span class="strong"><strong>debmake -k</strong></span>»)</li>
          </ul>
        </div>
        <p>Используйте эту переменную следующим образом:</p>
        <pre class="screen"> $ DEBUG=pdfbmeclak debmake ...</pre>
        <p>Дополнительную информацию см. в файле README.developer.</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_author"/>A.8. АВТОР</h2>
            </div>
          </div>
        </div>
        <p>Copyright © 2014-2017 Osamu Aoki &lt;<a class="ulink" href="mailto:osamu@debian.org">osamu@debian.org</a>&gt;</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_license"/>A.9. ЛИЦЕНЗИЯ</h2>
            </div>
          </div>
        </div>
        <p>Лицензия Expat</p>
      </div>
      <div class="section">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title"><a id="_see_also"/>A.10. СМОТРИТЕ ТАКЖЕ</h2>
            </div>
          </div>
        </div>
        <p>The <span class="strong"><strong>debmake-doc</strong></span> package provides the “Guide for Debian Maintainers” in plain text, HTML and PDF formats under the <span class="strong"><strong>/usr/share/doc/debmake-doc/</strong></span> directory.</p>
        <p>Также см. страницы руководства <span class="strong"><strong>dpkg-source</strong></span>(1), <span class="strong"><strong>deb-control</strong></span>(5), <span class="strong"><strong>debhelper</strong></span>(7), <span class="strong"><strong>dh</strong></span>(1), <span class="strong"><strong>dpkg-buildpackage</strong></span>(1), <span class="strong"><strong>debuild</strong></span>(1), <span class="strong"><strong>quilt</strong></span>(1), <span class="strong"><strong>dpkg-depcheck</strong></span>(1), <span class="strong"><strong>pdebuild</strong></span>(1), <span class="strong"><strong>pbuilder</strong></span>(8), <span class="strong"><strong>cowbuilder</strong></span>(8), <span class="strong"><strong>gbp-buildpackage</strong></span>(1), <span class="strong"><strong>gbp-pq</strong></span>(1) и <span class="strong"><strong>git-pbuilder</strong></span>(1).</p>
      </div>
    </div>
    <div class="navfooter">
      <hr/>
      <table width="100%" summary="Navigation footer">
        <tr>
          <td align="left"><a accesskey="p" href="ch08.ru.html"><img src="images/prev.png" alt="Пред."/></a> </td>
          <td align="center"> </td>
          <td align="right"> </td>
        </tr>
        <tr>
          <td align="left" valign="top">Глава 8. Дополнительные примеры </td>
          <td align="center">
            <a accesskey="h" href="index.ru.html">
              <img src="images/home.png" alt="Начало"/>
            </a>
          </td>
          <td align="right" valign="top"> </td>
        </tr>
      </table>
    </div>
  </body>
</html>
